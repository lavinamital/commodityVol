[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Commodity Volatility",
    "section": "",
    "text": "1 Introduction",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "2  Data",
    "section": "",
    "text": "2.1 Description (2.1)\nFor this project I use daily futures data for three major commodities: gold (GC=F), WTI crude oil (CL=F), and natural gas (NG=F). The data is downloaded from Yahoo Finance using the tq_get() function in tidyquant package, which provides access to Yahoo’s historical price data. I pulled data from Jan 1, 2014 to now so I could capture several years of “normal” market behavior as well as the periods around the three major global events I analyze later (COVID-19 pandemic, the Russian invasion of Ukraine, and the Israel–Hamas escalation). For each commodity, the raw data set includes the daily open, high, low, and close prices, the adjusted closing price (which I rename to price and base my analysis on). I used the adjusted price because it stitches together the different futures contracts over time, creating a smooth and consistent time series. The data set also contains daily trading volume. I construct two additional variables: a simple daily return, defined as price / lag(price) − 1, which captures the day-to-day percentage change in price, and a log return, log(price / lag(price)), which is easier to work with over longer horizons because log returns add up cleanly across days and treat up and down moves more symmetrically. The raw data used in this chapter are stored in the repository at data/raw/commodities_raw.rds and were generated by the script scripts/pull_commodities.R, which documents the exact download parameters.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis\n\n\nCode\n# Count missing values by variable\nmissing_by_var &lt;- commod_raw |&gt;\n  dplyr::summarize(dplyr::across(dplyr::everything(), ~ sum(is.na(.x)))) |&gt;\n  tidyr::pivot_longer(\n    cols = dplyr::everything(),\n    names_to = \"variable\",\n    values_to = \"n_missing\"\n  )\n\nmissing_by_var\n\n\n# A tibble: 10 × 2\n   variable   n_missing\n   &lt;chr&gt;          &lt;int&gt;\n 1 ticker             0\n 2 date               0\n 3 open              15\n 4 high              15\n 5 low               15\n 6 close             15\n 7 volume            15\n 8 price             15\n 9 ret_simple        33\n10 ret_log           35\n\n\nCode\nggplot2::ggplot(missing_by_var,\n       ggplot2::aes(x = reorder(variable, n_missing),\n                    y = n_missing)) +\n  ggplot2::geom_col() +\n  ggplot2::coord_flip() +\n  ggplot2::labs(\n    title = \"Missing values by variable\",\n    x = \"Variable\",\n    y = \"Count of missing values\"\n  ) +\n  ggplot2::theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\nThe bar chart shows that almost all of the missing values occur in the two return variables (ret_simple and ret_log), which is expected because the first observation for each ticker has no prior price and therefore no return. The only other variable with any missingness is volume, and even there the total number of missing entries is very small. All of the price-related variables (price, open, high, low, close) have essentially no missing values, which suggests the underlying futures data from Yahoo Finance is very complete.\n\n\nCode\n#| label: missing-over-time\n#| fig.cap: \"Missing price and volume values over time.\"\n#| warning: false\n#| message: false\n\n# 1. Compute missingness per date\nmissing_over_time &lt;- commod_raw |&gt;\n  dplyr::group_by(date) |&gt;\n  dplyr::summarise(\n    n_missing_price  = sum(is.na(price)),\n    n_missing_volume = sum(is.na(volume)),\n    .groups = \"drop\"\n  )\n\n# 2. Plot:\n#   - volume as a line over time\n#   - price as a flat horizontal line at 0\nggplot() +\n  # volume line\n  geom_line(\n    data = missing_over_time,\n    aes(x = date, y = n_missing_volume, color = \"n_missing_volume\"),\n    linewidth = 1\n  ) +\n  # price horizontal line at 0\n  geom_hline(\n    aes(yintercept = 0, color = \"n_missing_price\"),\n    linewidth = 1\n  ) +\n  scale_color_manual(\n    name   = \"Variable\",\n    values = c(\n      \"n_missing_price\"  = \"red\",\n      \"n_missing_volume\" = \"blue\"\n    ),\n    labels = c(\n      \"n_missing_price\"  = \"Price (missing count)\",\n      \"n_missing_volume\" = \"Volume (missing count)\"\n    )\n  ) +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.05))) +\n  labs(\n    title = \"Missing price and volume over time\",\n    x = \"Date\",\n    y = \"Number of missing values across tickers\"\n  ) +\n  theme_minimal(base_size = 14)\n\n\n\n\n\n\n\n\n\nThe time-series view confirms that missing values are extremely rare and occur only for the volume variable. There are just a few isolated dates with missing volume and no dates at all with missing prices. These gaps are likely due to occasional exchange holidays or incomplete reporting rather than a systematic issue. Because they are so sparse, I can safely drop those rows or ignore them in later plots without affecting the overall patterns.\n\n\nCode\nmissing_heat &lt;- commod_raw |&gt;\n  mutate(across(-c(date, ticker), ~ is.na(.x))) |&gt;\n  tidyr::pivot_longer(\n    cols = -c(date, ticker),\n    names_to = \"variable\",\n    values_to = \"is_missing\"\n  )\n\nmissing_heat_zoom &lt;- missing_heat |&gt;\n  dplyr::filter(is_missing)\n\nggplot(missing_heat_zoom,\n       aes(x = date, y = variable, fill = is_missing)) +\n  geom_tile() +\n  scale_fill_manual(values = c(\"FALSE\" = \"white\", \"TRUE\" = \"red\")) +\n  labs(\n    title = \"Missing value heatmap, zoomed into missing days\",\n    x = \"Date\",\n    y = \"Variable\",\n    fill = \"Missing?\"\n  ) +\n  theme_minimal(base_size = 14) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\nThe heatmap makes the missingness pattern even more apparent. The thin red stripes for ret_simple and ret_log at the start of the sample correspond to the first day for each ticker, where returns are undefined by construction. A few additional red tiles for volume line up with the isolated missing days seen in the time-series plot. The absence of red tiles for the price variables again indicates that price data are fully observed. Overall, the missing values are rare, localized, and do not require any special treatment beyond ignoring the first return for each series.",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Data</span>"
    ]
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "3.1 Non technical summary:\nIndexing the three commodities to 100 in 2014 allows us to compare their movements on the same scale since the true market values for each of these assets varies significantly based on value and demand in the global marketplace. Gold shows the most consistent upward trend, with sharp increases during periods of global uncertainty such as 2020 and 2024–2025. This is why Gold is thought to always be the most safe and stable investment, no matter the economic climate. Crude oil displays large event-driven swings—most notably the collapse during early 2020 and volatility surrounding the Russia–Ukraine invasion. Natural gas is the most erratic and volatile, with frequent spikes and crashes tied to supply disruptions and seasonal demand. Overall, Gold behaves like a steady safe-haven asset, while oil and natural gas react more dramatically to geopolitical matters and market shocks.\nThe distribution of daily log returns differs noticeably across commodities. Gold has the sharpest, narrowest peak centered at zero, reflecting its role as a low-volatility safe-haven asset. Crude oil and natural gas show wider distributions, indicating more day-to-day price variability. Natural gas shows the heaviest tails, consistent with its tendency toward extreme price swings driven by supply shocks and seasonal demand. Overall, these distributions highlight that the three commodities respond very differently to global events, like the graph above emphasized as well. Using log returns instead of actual plain price differences ensures comparability across assets with different price levels and provides a scale-free measure of daily percentage changes. This way we can ensure our comparisons are fair and unbiased, and is done repeatedly in the following graphs.\nThe boxplots highlight clear differences in volatility across the three commodities. Gold shows a very tight distribution with minimal outliers, reflecting its stable, low-volatility behavior. Crude oil displays moderate dispersion with occasional large moves tied to geopolitical shocks and shifts in global demand. Natural gas shows the widest spread and the most extreme outliers, underscoring its susceptibility to abrupt weather-driven or supply-driven price swings.\nThe 30-day rolling volatility plot shows clear spikes in commodity risk during major global events. Natural gas exhibits the highest and most frequent volatility surges, reflecting its sensitivity to supply disruptions and geopolitical risk. Oil shows sharp but less persistent volatility spikes, particularly during the COVID-19 shock and the early phase of the Russia–Ukraine conflict. Gold remains the most stable of the three commodities, with muted volatility changes even during large global shocks—consistent with its behavior as a safe-haven asset. These patterns highlight that not all commodities react equally to global crises, and volatility can reveal more about market stress than prices alone.\nThe rolling 90-day correlations show how tightly linked these commodity markets are over time. The Oil–Natural Gas pair typically has the strongest and most consistently positive correlation, reflecting their shared exposure to global energy demand and supply shocks. Correlations involving Gold are generally lower and more unstable, which fits the idea that gold behaves differently from energy markets and sometimes moves independently as a safe-haven asset. Around major events highlighted earlier, correlations shift noticeably, suggesting that crises can temporarily pull markets together or push them apart depending on the nature of the shock.\nThis heatmap provides a higher-level view of how correlation relationships between commodities evolve over time by aggregating the 90-day rolling correlations into monthly averages. While the earlier line graph showed noisy day-to-day fluctuations, this visualization shows more stable structural patterns, such as Oil–Gold correlations frequently turning mildly positive during stressed periods (light purple) and Gold–Natural Gas occasionally going slighlty negative (light red) during commodity-specific shocks. Notably, the darker purple patches around 2020–2022 for Oil–Natural Gas align with the COVID-19 shock and subsequent energy-market disruptions, reinforcing insights from the line plot but in a more interpretable, pattern-oriented format. By smoothing volatility and emphasizing temporal regimes rather than individual movements, the heatmap strengthens our narrative that commodity relationships shift meaningfully in response to global events rather than remaining stable over time.\nAbnormal volatility patterns differ sharply across global shocks, and each commodity responds in ways consistent with its economic role. During the COVID-19 declaration, oil experiences an extreme surge in volatility as demand collapsed and supply uncertainty grew, while gold and natural gas show only moderate increases. The Israel–Hamas escalation produces a much smaller and more contained market reaction, with modest volatility rises concentrated in oil and gold. The Russian invasion of Ukraine triggers the largest natural gas volatility spike in the sample, reflecting Europe’s dependence on Russian supply, alongside a notable jump in oil volatility. Overall, different events activate different market channels, revealing how commodity-specific fundamentals shape volatility responses.\nThese graphs track cumulative returns over a 120-day window around each crisis (60 days before, 60 days after), setting day −1 to zero so we can compare how each commodity moves through the event. Gold tends to drift upward during each event, consistent with its role as a safe-haven asset. Oil and natural gas show much sharper swings: both sell off around COVID-19 but rally strongly around the Ukraine invasion, while the Israel–Hamas escalation produces more muted but still positive moves. Together with the volatility plots, this graph shows that crises do not just increase risk; they systematically reprice commodities in different directions, with natural gas and oil reacting most strongly and gold providing steadier, more defensive performance (as expected).\nThe analysis above shows that crude oil, gold, and natural gas behave very differently over time and respond differently to major global events. Gold is the most stable, oil shows moderate swings, and natural gas is the most volatile. During crises—such as COVID-19 and the Russia–Ukraine invasion—volatility spikes sharply for natural gas and oil, while gold remains relatively steady. We also find that relationships between commodities shift over time: oil and natural gas often move together, while gold tends to act independently. It is additionally important to note that the nature of the crisis will also play a role in how the assets move long term, while the initial reactions can be repetitive. Overall, the results reveal clear differences in each commodity’s risk profile and how strongly each reacts to global shocks.",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Results</span>"
    ]
  }
]